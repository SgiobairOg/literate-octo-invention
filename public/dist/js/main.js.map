{"version":3,"sources":["../../../src/js/main.js"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["const animations = document.querySelectorAll('.animated');\nconst progressBar = document.querySelector('#progress > .bar');\n\nconst debounce = (func, wait=20, immediate=true) => {\n  let timeout;\n  return (...args) => {\n    let context = this;\n    const later = () => {\n      timeout = null;\n      if(!immediate) func.apply(context, args);\n    };\n    let callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n};\n\nconst checkAnimation = (e) => {\n  \n  animations.forEach( animation => {\n    const animationTrigger = (window.scrollY + window.innerHeight) - animation.offsetHeight;\n  \n    const isShowing = animationTrigger > animation.offsetTop;\n    \n    if( isShowing) {\n      animation.classList.remove('inactive');\n    } else {\n      animation.classList.add('inactive');\n    }\n  })\n};\n\nconst checkProgress = (e) => {\n  const body = document.body,\n      html = document.documentElement;\n  \n  const pageHeight = Math.max( body.scrollHeight, body.offsetHeight,\n    html.clientHeight, html.scrollHeight, html.offsetHeight );\n  \n  //console.log(pageHeight, window.scrollY + window.innerHeight, (((window.scrollY+ window.innerHeight) / pageHeight) * 100));\n  progressBar.style.width = `${((window.scrollY / (pageHeight - window.innerHeight)) * 100)}vw`;\n};\n\nconst checkBG = (e) => {\n  const body = document.body,\n        bg2Target = document.querySelector('#offerings');\n  \n  const bg2Trigger = (bg2Target.offsetTop + (bg2Target.offsetHeight / 6));\n  \n  if( window.scrollY > bg2Trigger ) document.querySelector('#wrapper').classList.add('bg2');\n  if( window.scrollY <= bg2Trigger ) document.querySelector('#wrapper').classList.remove('bg2');\n  \n};\n\nconst checkPlacemark = (e) => {\n  const placemarks = document.querySelectorAll('[data-placemark]');\n  let current = '';\n  \n  placemarks.forEach( mark => {\n    if( mark.offsetTop < ( window.scrollY + ( 4 * window.innerHeight/5 ))) {\n      current = mark.dataset.placemark;\n      \n    }\n  });\n  \n  history.replaceState(null, null, current);\n};\n\nconst initAnimation = (e) => {\n  animations.forEach(animation => animation.classList.add('inactive'));\n}\n\nwindow.addEventListener('load', initAnimation);\nwindow.addEventListener('scroll', debounce(checkAnimation, 10));\nwindow.addEventListener('scroll', debounce(checkProgress, 20));\nwindow.addEventListener('scroll', debounce(checkBG, 20));\nwindow.addEventListener('scroll', debounce(checkPlacemark, 10));"]}