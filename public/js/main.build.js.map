{"version":3,"sources":["main.js"],"names":[],"mappings":"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","file":"main.build.js","sourcesContent":["\nconst animations = document.querySelectorAll('.animated')\n  , placemarks = document.querySelectorAll('[data-placemark]')\n  , progressBar = document.querySelector('.progress__bar')\n  , bg2Target = document.querySelector('.offerings')\n  , bg3Target = document.querySelector('.projects')\n  , bg4Target = document.querySelector('.experience')\n  , wrapper = document.querySelector('.wrapper').classList\n  , backdrop = document.querySelector('.page__backdrop').classList\n  , body = document.body\n  , html = document.documentElement\n  , pageHeight = Math.max( body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight )\n  , scrollSpeed = 160\n  , innerHeight = window.innerHeight;\n  \nlet latestScrollY = 0\n  , ticking = false;\n\nconst checkAnimation = ( scrollY ) => {\n  \n  _.forEach(animations, animation => {\n    const animationTrigger = (scrollY + innerHeight) - animation.positionData.offsetHeight;\n  \n    const isShowing = animationTrigger > animation.positionData.offsetTop;\n    \n    if( isShowing ) {\n      animation.classList.remove('inactive');\n    } else {\n      animation.classList.add('inactive');\n    }\n  })\n};\n\nconst checkProgress = ( scrollY ) => {\n  progressBar.style.width = `${((scrollY / (pageHeight - innerHeight)) * 100)}vw`;\n};\n\nconst checkBG = ( scrollY ) => {\n  switch (true) {\n    case scrollY <= bg2Target.positionData.trigger:\n      backdrop.add('page__backdrop--bg1');\n      backdrop.remove('page__backdrop--bg2');\n      break;\n    case scrollY > bg2Target.positionData.trigger && scrollY <= bg3Target.positionData.trigger:\n      backdrop.remove('page__backdrop--bg1');\n      backdrop.add('page__backdrop--bg2');\n      backdrop.remove('page__backdrop--bg3');\n      break;\n    case scrollY > bg3Target.positionData.trigger && scrollY <= bg4Target.positionData.trigger:\n      backdrop.remove('page__backdrop--bg2');\n      backdrop.add('page__backdrop--bg3');\n      backdrop.remove('page__backdrop--bg4');\n      break;\n    case scrollY > bg4Target.positionData.trigger:\n      backdrop.add('page__backdrop--bg4');\n      backdrop.remove('page__backdrop--bg3');\n      break;\n    default:\n      backdrop.add('page__backdrop--bg1');\n      backdrop.remove('page__backdrop--bg2');\n      backdrop.remove('page__backdrop--bg3');\n      backdrop.remove('page__backdrop--bg4');\n      break;\n  }\n  \n};\n\nconst checkPlacemark = ( scrollY ) => {\n  let current = '';\n  \n  _.forEach(placemarks, mark => {\n    if( mark.offsetTop < ( scrollY + ( 4 * innerHeight/5 ))) {\n      current = mark.dataset.placemark;\n    }\n  });\n  \n  history.replaceState(null, null, current);\n};\n\n\nconst checkScroll = () => {\n  latestScrollY = window.scrollY;\n  \n  getTicker();\n};\n\nconst getTicker = () => {\n  if(!ticking) requestAnimationFrame(update);\n  \n  ticking = true;\n};\n\nconst update = () => {\n  ticking = false;\n  \n  const currScrollY = latestScrollY;\n  \n  if (animations.length > 0) {\n    checkAnimation( currScrollY );\n  }\n  \n  if (placemarks.length > 0) {\n    checkPlacemark( currScrollY );\n  }\n  \n  if (progressBar != null) {\n    checkProgress( currScrollY );\n  }\n  \n  checkBG( currScrollY );\n};\n\nconst initScrollResponders = () => {\n  _.forEach(animations, animation => {\n    animation.classList.add('inactive');\n    animation.positionData = {\n      offsetHeight: animation.offsetHeight,\n      offsetTop: animation.offsetTop\n    };\n  });\n  \n  if( bg2Target != null ) {\n    bg2Target.positionData = {\n      trigger: (bg2Target.offsetTop + (bg2Target.offsetHeight / 6))\n    };\n  }\n  \n  if( bg3Target != null ) {\n    bg3Target.positionData = {\n      trigger: (bg3Target.offsetTop + (bg3Target.offsetHeight / 6))\n    };\n  }\n  \n  if( bg4Target != null ) {\n    bg4Target.positionData = {\n      trigger: (bg4Target.offsetTop + (bg4Target.offsetHeight / 6))\n    };\n  }\n};\n\nconst preloadImages = (array) => {\n  if (!preloadImages.list) {\n    preloadImages.list = [];\n  }\n  const list = preloadImages.list;\n  _.forEach( array, (i) => {\n    let img = new Image();\n    img.onload = () => {\n      let index = list.indexOf(this);\n      if (index !== -1) {\n        // remove image from the array once it's loaded\n        // for memory consumption reasons\n        list.splice(index, 1);\n      }\n    };\n    list.push(img);\n    img.src = i;\n  });\n};\n\npreloadImages([\"https://res.cloudinary.com/sgiobairog/image/upload/q_auto:good/v1501190314/wilsons/moi.jpg\", \"https://res.cloudinary.com/sgiobairog/image/upload/q_auto:good/v1501190314/wilsons/candles.jpg\", \"https://res.cloudinary.com/sgiobairog/image/upload/q_auto:good/v1501190314/wilsons/fairweather.jpg\", \"https://res.cloudinary.com/sgiobairog/image/upload/q_auto:good/v1501190314/wilsons/desk.jpg\"]);\n\nwindow.addEventListener('load', initScrollResponders);\nwindow.addEventListener('scroll', _.throttle(checkScroll, scrollSpeed));"]}